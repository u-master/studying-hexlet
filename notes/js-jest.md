## Настройка и запуск

* Пакет должен быть инициализирован (`npm init`)
* Устанавливаем (зависимости в devDependencies):

      npm i --save-dev jest
      
* Для поддержки Babel убедиться что есть пакеты (я устанавливал `preset-env`, остальные были):

      npm i --save-dev babel-jest @babel/core @babel/preset-env
      
* В корне проекта создать файл *babel.config.js* с таким содержимым:

      module.exports = {
        presets: [['@babel/preset-env', {targets: {node: 'current'}}]],
      };
      
* Jest ожидает, что тесты находятся в директории *\_\_tests\_\_*, которую обычно располагают в корне проекта.
Внутри этого каталога, можно создавать любую структуру, Jest найдёт все тесты, которые там лежат. 
* Именование файлов с тестами должно быть таким: *\<name\>.test.js*. 
Где \<name\>, как правило, соответствует имени модуля, который тестируется.
* Запуск тестов:
      npx jest

## Структура тестов

* Для тестов Jest предоставляет **глобальные** (не надо импортировать) функции: *describe*, *test*, *expect*.
* *test* - нужна для описания конкретного теста и его проверок.
  * Первый параметр - строка, которая описывает тест. Эта строка отображается на экране во время запуска
  теста для упрощения отладки.
  * Второй параметр — функция, которая реализует проверочный код. *Этот код не выполняется сразу.*
  Функция test добавляет его внутри Jest, который уже решает как и когда запускать тесты.
  Это позволяет проводить различные оптимизации, например, выполнять тесты параллельно.
* *expect* - используется когда вы хотите проверить значение, 
исполняется внутри проверочной функции, переданной в test. Параметром является результат 
запуска тестируемой функции. Возращает объект, из которого запускаются *"матчеры" (matchers)*. Т.е. так:    
  * Вызывается функция *expect* куда передаётся актуальное (фактическое) значение.
  * На результате, возвращаемом функцией expect, вызывается подходящий матчер, например, toEqual.
  * Пример: `expect(reverse('hello')).toEqual('olleh'); // где reverse - тестируемая функция.`
* *describe(name, fn)* - группирует связанные по логике тесты (вызовы функции test) в один блок. 
Использовать группировку тестов не обязательно - можно просто вызывать test на верхнем уровне.
  
## Матчеры (Matchers, Expectations)

* *toBe()* - проверка на равенство по ссылке, вывод не слишком информативен
* *toEqual()* - проверка на равенство по значению
* *toHaveLength()* - проверка размера результирующего массива, выводит содержимое массива в случае ошибки
* *toContain(elem)* - проверка наличия элемента `elem` в результирующем массиве
* *toMatch(substr)* - проверка содержания подстроки `substr` в результирующей строке
* *toHaveProperty('key', 'value')* - проверка наличия свойства `key` со значением `value` в результирующем объекте
* *toMatchObject(subobj)* - когда нас в тестах интересует наличие какой-то части объекта
* *toBeNull()* - проверка результата на `null`
* *toBeUndefined()* - проверка результата на `undefined`
* *toBeTruthy()* - проверка результата, приведенного к логическому типу, на значение 'true'.
Для точного равенства на true, использовать `toBe()`
* *not.\** - отрицание последующего матчера
* и т.д. - [expect и matchers](https://jestjs.io/docs/ru/expect)
